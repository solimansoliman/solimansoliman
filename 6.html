<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¨Ø­Ø« Ù…Ø¹ Ø³Ø¬Ù„ Ø§Ù„Ø¨Ø­Ø«</title>
    <style>
        body { font-family: Arial, sans-serif; direction: rtl; text-align: right; background-color: #f9f9f9; }
        .search-container { width: 350px; margin: 20px auto; position: relative; }
        .search-box { display: flex; align-items: center; background: white; border-radius: 20px; padding: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); cursor: text; }
        input { flex: 1; border: none; outline: none; padding: 8px; font-size: 16px; }
        .search-icon { font-size: 20px; color: gray; cursor: pointer; }
        .history-container { position: absolute; width: 100%; background: white; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.2); display: none; max-height: 250px; overflow-y: auto; margin-top: 5px; }
        .history-header { display: flex; justify-content: space-between; align-items: center; padding: 10px; font-weight: bold; border-bottom: 1px solid #ddd; }
        .history-item { display: flex; align-items: center; padding: 10px; cursor: pointer; transition: background 0.3s; }
        .history-item:hover { background: #f1f1f1; }
        .history-icon { width: 25px; height: 25px; border-radius: 50%; margin-left: 10px; }
        .delete-btn { margin-right: auto; color: red; cursor: pointer; font-weight: bold; }
        .history-time { font-size: 12px; color: #888; margin-right: 10px; }
        .char-counter { font-size: 12px; color: #888; margin-top: 5px; text-align: left; }
        .char-counter.warning { color: red; }
    </style>
</head>
<body>
    <div class="search-container">
        <div class="search-box" onclick="showHistory()">
            <span class="search-icon" onclick="performSearch()">ğŸ”</span>
            <input type="text" id="searchInput" placeholder="Ø§Ø¨Ø­Ø« Ù‡Ù†Ø§..." onkeyup="handleKeyUp(event)" onfocus="showHistory()" maxlength="100">
        </div>
        <div class="char-counter" id="charCounter">100 Ø­Ø±Ù Ù…ØªØ¨Ù‚ÙŠØ©</div>
        <div class="history-container" id="history">
            <div class="history-header">
                <span>Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø£Ø®ÙŠØ±Ø©</span>
                <span class="delete-btn" onclick="clearHistory()">ğŸ—‘ï¸</span>
            </div>
        </div>
    </div>

    <script>
        const historyKey = "searchHistory";
        const maxChars = 100; // Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø­Ø±Ù

        function loadHistory() {
            return JSON.parse(localStorage.getItem(historyKey)) || [];
        }

        function showHistory() {
            const historyDiv = document.getElementById("history");
            const input = document.getElementById("searchInput").value.toLowerCase();
            let history = loadHistory().filter(item => item.text.toLowerCase().includes(input));
            historyDiv.innerHTML = `
                <div class="history-header">
                    <span>Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø£Ø®ÙŠØ±Ø©</span>
                    <span class="delete-btn" onclick="clearHistory()">ğŸ—‘ï¸</span>
                </div>`;
            
            if (history.length > 0) {
                historyDiv.style.display = "block";
                history.forEach((item, index) => {
                    let div = document.createElement("div");
                    div.className = "history-item";
                    div.innerHTML = `
                        <img src="${item.image}" class="history-icon" alt="ØµÙˆØ±Ø© Ø§Ù„Ø¨Ø­Ø«">
                        <span>${item.text}</span>
                        <span class="history-time">${item.time}</span>
                        <span class="delete-btn" onclick="deleteHistory(event, ${index})">âŒ</span>
                    `;
                    div.onclick = () => {
                        document.getElementById("searchInput").value = item.text;
                        updateCharCounter();
                        historyDiv.style.display = "none";
                    };
                    historyDiv.appendChild(div);
                });
            } else {
                historyDiv.style.display = "none";
            }
        }

        function performSearch() {
            let searchInput = document.getElementById("searchInput").value;
            if (!searchInput.trim()) return;

            // ØªÙ†Ø¸ÙŠÙ Ù†Øµ Ø§Ù„Ø¨Ø­Ø« Ù…Ù† Ø£ÙŠ Ø£ÙƒÙˆØ§Ø¯ HTML
            searchInput = sanitizeInput(searchInput);

            let history = loadHistory();
            
            // Ù…Ù†Ø¹ ØªÙƒØ±Ø§Ø± Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„Ø§Øª
            history = history.filter(item => item.text !== searchInput);
            
            let searchItem = {
                text: searchInput,
                image: "image.png",
                time: new Date().toLocaleString() // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ø§Ù„ÙŠ
            };
            history.unshift(searchItem);
            localStorage.setItem(historyKey, JSON.stringify(history));
            showHistory();
        }

        function handleKeyUp(event) {
            if (event.key === "Enter") {
                performSearch();
            }
            updateCharCounter();
            showHistory();
        }

        function updateCharCounter() {
            const input = document.getElementById("searchInput");
            const charCounter = document.getElementById("charCounter");
            const remainingChars = maxChars - input.value.length;
            charCounter.textContent = `${remainingChars} Ø­Ø±Ù Ù…ØªØ¨Ù‚ÙŠØ©`;
            if (remainingChars <= 10) {
                charCounter.classList.add("warning");
            } else {
                charCounter.classList.remove("warning");
            }
        }

        function deleteHistory(event, index) {
            event.stopPropagation();
            let history = loadHistory();
            history.splice(index, 1);
            localStorage.setItem(historyKey, JSON.stringify(history));
            showHistory();
        }

        function clearHistory() {
            localStorage.removeItem(historyKey);
            document.getElementById("history").style.display = "none";
        }

        function sanitizeInput(input) {
            // Ø¥Ø²Ø§Ù„Ø© Ø£ÙŠ Ø£ÙƒÙˆØ§Ø¯ HTML Ù…Ù† Ø§Ù„Ù†Øµ
            const temp = document.createElement("div");
            temp.textContent = input;
            return temp.innerHTML;
        }
    </script>
</body>
</html>



<!-- 


Ø´Ø±Ø­ Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª:
Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù„Ø£Ø­Ø±Ù:

ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø®Ø§ØµÙŠØ© maxlength="100" Ø¥Ù„Ù‰ Ø­Ù‚Ù„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ Ù„Ù…Ù†Ø¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ù† Ø¥Ø¯Ø®Ø§Ù„ Ø£ÙƒØ«Ø± Ù…Ù† 100 Ø­Ø±Ù.

ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø¹Ø¯Ø§Ø¯ Ù„Ù„Ø£Ø­Ø±Ù Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ© (char-counter) ÙŠØ¹Ø±Ø¶ Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø­Ø±Ù Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ© Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ÙƒØªØ§Ø¨Ø©.

ØªÙ†Ø¸ÙŠÙ Ù†Øµ Ø§Ù„Ø¨Ø­Ø« Ù…Ù† HTML:

ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø¯Ø§Ù„Ø© sanitizeInput Ù„Ø¥Ø²Ø§Ù„Ø© Ø£ÙŠ Ø£ÙƒÙˆØ§Ø¯ HTML Ù…Ù† Ù†Øµ Ø§Ù„Ø¨Ø­Ø« Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¹Ù†ØµØ± div Ù…Ø¤Ù‚Øª.

ØªØ­Ø³ÙŠÙ†Ø§Øª ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:

ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© ØªØ­Ø°ÙŠØ± Ù…Ø±Ø¦ÙŠ (Ù„ÙˆÙ† Ø£Ø­Ù…Ø±) Ø¹Ù†Ø¯Ù…Ø§ ÙŠØªØ¨Ù‚Ù‰ Ø£Ù‚Ù„ Ù…Ù† 10 Ø£Ø­Ø±Ù.

ØªÙ… ØªØ­Ø³ÙŠÙ† Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø­Ø±Ù Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ© Ø£Ø³ÙÙ„ Ø­Ù‚Ù„ Ø§Ù„Ø¨Ø­Ø«.

Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ø£Ù…Ø§Ù†:

ØªÙ… ØªÙ†Ø¸ÙŠÙ Ù†Øµ Ø§Ù„Ø¨Ø­Ø« Ù…Ù† Ø£ÙŠ Ø£ÙƒÙˆØ§Ø¯ HTML Ù‚Ø¨Ù„ ØªØ®Ø²ÙŠÙ†Ù‡ ÙÙŠ Ø§Ù„Ø³Ø¬Ù„.

ÙƒÙŠÙÙŠØ© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…:
Ø§ÙƒØªØ¨ ÙÙŠ Ø­Ù‚Ù„ Ø§Ù„Ø¨Ø­Ø«ØŒ ÙˆØ³ÙŠØ¸Ù‡Ø± Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø­Ø±Ù Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ© Ø£Ø³ÙÙ„Ù‡.

Ø¥Ø°Ø§ ÙˆØµÙ„Øª Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù„Ø£Ø­Ø±ÙØŒ Ø³ÙŠØ¸Ù‡Ø± ØªØ­Ø°ÙŠØ± Ø¨Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø­Ù…Ø±.

ÙŠÙ…ÙƒÙ†Ùƒ Ø­Ø°Ù Ø¹Ù†Ø§ØµØ± Ù…Ø­Ø¯Ø¯Ø© Ù…Ù† Ø³Ø¬Ù„ Ø§Ù„Ø¨Ø­Ø« Ø£Ùˆ Ù…Ø³Ø­ Ø§Ù„Ø³Ø¬Ù„ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„.

Ø¥Ø°Ø§ ÙƒÙ†Øª Ø¨Ø­Ø§Ø¬Ø© Ø¥Ù„Ù‰ Ø£ÙŠ ØªØ­Ø³ÙŠÙ†Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ø£Ùˆ ØªÙˆØ¶ÙŠØ­Ø§ØªØŒ ÙÙ„Ø§ ØªØªØ±Ø¯Ø¯ ÙÙŠ Ø·Ù„Ø¨ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©! ğŸ˜Š -->

